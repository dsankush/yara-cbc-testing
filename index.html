<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yara Cashback Campaign Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
</head>
<body>
    <!-- Header Section -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="logo-section">
                <img src="yara_logo.svg" alt="Yara Logo" class="logo" onerror="this.style.display='none'">
                <div class="header-text">
                    <h1>Yara Cashback Campaign</h1>
                    <p class="subtitle">Advanced Analytics Dashboard</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn-primary" id="downloadBtn">
                    <i class="fas fa-download"></i> Download Report
                </button>
                <div class="last-updated">
                    <i class="fas fa-clock"></i>
                    <span id="lastUpdated">Loading...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Search and Filters Section -->
    <section class="controls-section">
        <div class="container">
            <!-- Universal Search -->
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="universalSearch" placeholder="Search by Farmer Name, Mobile, Retailer, Order ID...">
                <button class="clear-search" id="clearSearch">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Filters -->
            <div class="filters-container">
                <div class="filter-group">
                    <label><i class="fas fa-calendar-alt"></i> Date Range</label>
                    <div class="date-range-inputs">
                        <input type="date" id="startDate" class="filter-input">
                        <span class="date-separator">to</span>
                        <input type="date" id="endDate" class="filter-input">
                    </div>
                </div>

                <div class="filter-group">
                    <label><i class="fas fa-map-marker-alt"></i> District</label>
                    <select id="districtFilter" class="filter-select">
                        <option value="">All Districts</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label><i class="fas fa-seedling"></i> Crop</label>
                    <select id="cropFilter" class="filter-select">
                        <option value="">All Crops</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label><i class="fas fa-box"></i> Product</label>
                    <select id="productFilter" class="filter-select">
                        <option value="">All Products</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label><i class="fas fa-store"></i> Retailer</label>
                    <select id="retailerFilter" class="filter-select">
                        <option value="">All Retailers</option>
                    </select>
                </div>

                <button class="btn-secondary" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset Filters
                </button>
            </div>
        </div>
    </section>

    <!-- Main Dashboard -->
    <main class="dashboard-main">
        <div class="container">
            <!-- Key Metrics Row -->
            <div class="metrics-row">
                <div class="metric-card">
                    <div class="metric-icon blue">
                        <i class="fas fa-qrcode"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="totalScans">0</h3>
                        <p>Total Scans</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon green">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="uniqueFarmers">0</h3>
                        <p>Unique Farmers</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon yellow">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="pendingCount">0</h3>
                        <p>Pending Approvals</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="verifiedCount">0</h3>
                        <p>Verified Orders</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon red">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="rejectedCount">0</h3>
                        <p>Rejected Orders</p>
                    </div>
                </div>
            </div>

            <!-- Cashback Winners Metrics -->
            <div class="metrics-row">
                <div class="metric-card highlight">
                    <div class="metric-icon purple">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="cashbackWinners">0</h3>
                        <p>Cashback Winners</p>
                        <small>Orders ≥ ₹10,000</small>
                    </div>
                </div>

                <div class="metric-card highlight">
                    <div class="metric-icon orange">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="totalCashback">₹0</h3>
                        <p>Total Cashback Distributed</p>
                    </div>
                </div>

                <div class="metric-card highlight">
                    <div class="metric-icon teal">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="metric-content">
                        <h3 id="activeRetailers">0</h3>
                        <p>Active Retailers</p>
                        <small>Out of 59 total</small>
                    </div>
                </div>
            </div>

            <!-- Charts Row 1 -->
            <div class="charts-row">
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-bar"></i> Product-wise Units Ordered</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="productUnitsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Charts Row 2 -->
            <div class="charts-row">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-money-bill-wave"></i> Product-wise Cashback Distribution</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="cashbackChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-pie"></i> Approval Status Distribution</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="statusPieChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Budget Tracking -->
            <div class="charts-row">
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3><i class="fas fa-wallet"></i> Budget Tracking & Sales Performance</h3>
                    </div>
                    <div class="budget-grid">
                        <div class="budget-item" id="budgetYaraMilaComplex">
                            <div class="budget-product-header">
                                <h4>YaraMila Complex</h4>
                                <span class="budget-remaining">₹0 Remaining</span>
                            </div>
                            <div class="budget-bar">
                                <div class="budget-consumed" style="width: 0%"></div>
                            </div>
                            <div class="budget-stats">
                                <span><i class="fas fa-boxes"></i> <strong>0</strong> Bags Sold</span>
                                <span><i class="fas fa-rupee-sign"></i> Consumed: <strong>₹0</strong></span>
                                <span>Budget: <strong>₹75,000</strong></span>
                            </div>
                        </div>

                        <div class="budget-item" id="budgetYaraLivaNitrabor">
                            <div class="budget-product-header">
                                <h4>YaraLiva Nitrabor</h4>
                                <span class="budget-remaining">₹0 Remaining</span>
                            </div>
                            <div class="budget-bar">
                                <div class="budget-consumed" style="width: 0%"></div>
                            </div>
                            <div class="budget-stats">
                                <span><i class="fas fa-boxes"></i> <strong>0</strong> Bags Sold</span>
                                <span><i class="fas fa-rupee-sign"></i> Consumed: <strong>₹0</strong></span>
                                <span>Budget: <strong>₹50,000</strong></span>
                            </div>
                        </div>

                        <div class="budget-item" id="budgetYaraVitaSeniphos">
                            <div class="budget-product-header">
                                <h4>YaraVita Seniphos</h4>
                                <span class="budget-remaining">₹0 Remaining</span>
                            </div>
                            <div class="budget-bar">
                                <div class="budget-consumed" style="width: 0%"></div>
                            </div>
                            <div class="budget-stats">
                                <span><i class="fas fa-boxes"></i> <strong>0</strong> Units Sold</span>
                                <span><i class="fas fa-rupee-sign"></i> Consumed: <strong>₹0</strong></span>
                                <span>Budget: <strong>₹35,000</strong></span>
                            </div>
                        </div>

                        <div class="budget-item" id="budgetYaraVitaBortrac">
                            <div class="budget-product-header">
                                <h4>YaraVita Bortrac</h4>
                                <span class="budget-remaining">₹0 Remaining</span>
                            </div>
                            <div class="budget-bar">
                                <div class="budget-consumed" style="width: 0%"></div>
                            </div>
                            <div class="budget-stats">
                                <span><i class="fas fa-boxes"></i> <strong>0</strong> Units Sold</span>
                                <span><i class="fas fa-rupee-sign"></i> Consumed: <strong>₹0</strong></span>
                                <span>Budget: <strong>₹15,000</strong></span>
                            </div>
                        </div>

                        <div class="budget-item" id="budgetYaraVitaZintrac700">
                            <div class="budget-product-header">
                                <h4>YaraVita Zintrac 700</h4>
                                <span class="budget-remaining">₹0 Remaining</span>
                            </div>
                            <div class="budget-bar">
                                <div class="budget-consumed" style="width: 0%"></div>
                            </div>
                            <div class="budget-stats">
                                <span><i class="fas fa-boxes"></i> <strong>0</strong> Units Sold</span>
                                <span><i class="fas fa-rupee-sign"></i> Consumed: <strong>₹0</strong></span>
                                <span>Budget: <strong>₹25,000</strong></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row 3 -->
            <div class="charts-row">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-seedling"></i> Crop-wise Analysis</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="cropChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-map-marked-alt"></i> District-wise Farmers</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="districtChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Top Retailers Table -->
            <div class="charts-row">
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3><i class="fas fa-medal"></i> Top 10 Performing Retailers</h3>
                    </div>
                    <div class="table-container">
                        <table class="retailers-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>RIN</th>
                                    <th>Retailer Name</th>
                                    <th>Total Orders</th>
                                    <th>Unique Farmers</th>
                                    <th>Total Units Sold</th>
                                    <th>Verification Rate</th>
                                </tr>
                            </thead>
                            <tbody id="topRetailersTable">
                                <tr>
                                    <td colspan="7" class="no-data">Loading data...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- District Map Visualization -->
            <div class="charts-row">
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3><i class="fas fa-map"></i> Uttar Pradesh - District-wise Cashback Winners</h3>
                    </div>
                    <div class="map-container" id="districtMap">
                        <div class="map-grid" id="districtMapGrid">
                            <!-- Districts will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="container">
            <p>&copy; 2025 Yara International. All rights reserved. | Dashboard v1.0</p>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading Dashboard...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
